{% load static %}
<div class="signin">
  <form
    action="{% url 'dash-login' %}"
    method="post"
    style="width: 100%; height: 100%"
    onsubmit="return formValidate()"
  >
    {% csrf_token %}
    <div class="signin_name">
      <div class="signinName">Log In</div>
      <div class="loginURL">
        New User?
        <a
          style="margin-left: 4px; text-decoration: underline; cursor: pointer"
          href="../signin/"
          >SignUp</a
        >
      </div>
    </div>

    <div class="register_field_row">
      <div class="email_input" style="max-width: 630px; width: 100%">
        <div class="label">Email ID or Mobile</div>
        <div class="inputfield">
          <!-- <input type="text" name="login_email_mobile" id="" /> -->
          <input type="text" name="{{ login_form.email_or_mobile.name }}" id="{{ login_form.email_or_mobile.id_for_label }}" value="{{ login_form.email_or_mobile.value | default:'' }}" />
        </div>
      </div>

      <div class="mobile_input" style="max-width: 630px; width: 100%">
        <div class="label">Password</div>
        <div class="inputfield">
          <!-- <input type="password" name="login_pass" id="" autocomplete="off" /> -->
          <input type="password" name="{{ login_form.login_password.name }}" id="{{ login_form.login_password.id_for_label }}" value="{{ login_form.login_password.value | default:'' }}" autocomplete="off" />
        </div>
      </div>
    </div>

    <div class="submitrow">
      <div class="terms">
        <input
          type="checkbox"
          name="login_cookie_acceptance"
          id=""
          autocomplete="off"
        />
        <div>Accept cookies</div>
      </div>
      <button type="submit" id="login_button">Log In ></button>
    </div>
  </form>
</div>

<script>
  //   document.getElementById("login_button").addEventListener("click", () => {
  //     window.location.href = "..";
  //   });

  function formValidate() {
    function isNull(str) {
      const x = document.getElementById(str).value;
      if (x == "" || x == undefined) return true;
      return false;
    }

    //LAYER 2: CHECK IF ALL FIELDS ARE INSERTED OR NOT
    if (isNull("{{ login_form.login_password.id_for_label }}") || isNull("{{ login_form.email_or_mobile.id_for_label }}")) {
      alert("Fill out all fields");
      return false;
    } else {
      return true;
    }
  }
</script>
