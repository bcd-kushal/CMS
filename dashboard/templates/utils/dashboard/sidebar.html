{% load static %}

<div class="sidebar">
  <div class="sidebar_sections">
    <div class="side_home">
      <div
        class=""
        style="
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 5px;
        "
      >
        <i class="fa-solid fa-house fa-sm" style="color: #ffffff"></i>
      </div>
      <div
        class=""
        style="padding: 5px; padding-bottom: 0; align-self: baseline"
      >
        Home
      </div>
    </div>
    <div class="side_db">
      <div
        class=""
        style="
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 5px;
        "
      >
        <i class="fa-solid fa-database fa-sm" style="color: #ffffff"></i>
      </div>
      <div
        class=""
        style="padding: 5px; padding-bottom: 0; align-self: baseline"
      >
        Database
      </div>
    </div>
    <div class="side_api">
      <div
        class=""
        style="
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 5px;
        "
      >
        <i class="fa-solid fa-network-wired fa-sm" style="color: #ffffff"></i>
      </div>
      <div
        class=""
        style="padding: 5px; padding-bottom: 0; align-self: baseline"
      >
        API
      </div>
    </div>
    <div class="side_discordbot">
      <div
        class=""
        style="
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 5px;
        "
      >
        <i class="fa-brands fa-discord fa-sm" style="color: #ffffff"></i>
      </div>
      <div
        class=""
        style="padding: 5px; padding-bottom: 0; align-self: baseline"
      >
        Discord Bot
      </div>
    </div>
    <div class="side_analytics">
      <div
        class=""
        style="
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 5px;
        "
      >
        <i
          class="fa-solid fa-chart-pie fa-rotate-180 fa-sm"
          style="color: #ffffff"
        ></i>
      </div>
      <div
        class=""
        style="padding: 5px; padding-bottom: 0; align-self: baseline"
      >
        Analytics
      </div>
    </div>
  </div>

  <div class="sidebar_bottom">
    <div class="side_profile side_billing">
      <div
        class=""
        style="
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 5px;
        "
      >
        <i class="fa-regular fa-credit-card fa-sm" style="color: #ffffff"></i>
      </div>
      <div
        class=""
        style="padding: 5px; padding-bottom: 0; align-self: baseline"
      >
        Billing
      </div>
    </div>
    <div class="side_profile side_settings">
      <div
        class=""
        style="
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 5px;
        "
      >
        <i class="fa-solid fa-gear fa-sm" style="color: #ffffff"></i>
      </div>
      <div
        class=""
        style="padding: 5px; padding-bottom: 0; align-self: baseline"
      >
        Settings
      </div>
    </div>
    <div class="logout_seperator" style="display: flex; height: 25px">
      <div
        class="seperating_line"
        style="width: 100%; height: 2px; background: rgba(255, 255, 255, 0.31)"
      ></div>
    </div>
    <div class="side_profile logout_button">
      <div
        class=""
        style="
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 5px;
        "
      >
        <i
          class="fa-solid fa-arrow-right-from-bracket fa-sm"
          style="color: #ffffff"
        ></i>
      </div>
      <div
        class=""
        style="padding: 5px; padding-bottom: 0; align-self: baseline"
      >
        Logout
      </div>
    </div>
  </div>
</div>

<script>

    // ========= IIFE ==========================================

    (() => {
        
        const ACTIVE_GLASS_COLOR = "linear-gradient( 136deg, rgba(159, 125, 210, 0.41) 0%, rgba(166, 176, 214, 0.03) 63%, rgba(166, 176, 214, 0) 100% )";

        let curr_location = window.location.href, active_button;
        curr_location = curr_location.substring(
            0,
            curr_location.lastIndexOf("/")
        );
        curr_location = curr_location.substring(curr_location.lastIndexOf("/"));
        
        switch(curr_location){
            case "/home":
                document.getElementsByClassName("side_home")[0].style.background = ACTIVE_GLASS_COLOR;        
                break;

            case "/api":
                document.getElementsByClassName("side_api")[0].style.background = ACTIVE_GLASS_COLOR;
                break;

            case "/database": 
            case "/create": 
                document.getElementsByClassName("side_db")[0].style.background = ACTIVE_GLASS_COLOR;

                break;

            case "/bot":    
                document.getElementsByClassName("side_discordbot")[0].style.background = ACTIVE_GLASS_COLOR;

                break;

            case "/analytics": 
                document.getElementsByClassName("side_analytics")[0].style.background = ACTIVE_GLASS_COLOR;


                break;


            default: 
                console.error("ERROR: INCORRECTLY PARSED BUTTON NAME HERE")

        }


    })();








  document
    .getElementsByClassName("logout_button")[0]
    .addEventListener("click", () => {
      window.location.href = "/logout/";
    });

  //===========================================================================================

  document
    .getElementsByClassName("side_home")[0]
    .addEventListener("click", () => {
      let curr_location = window.location.href;
      curr_location = curr_location.substring(
        0,
        curr_location.lastIndexOf("/")
      );
      curr_location = curr_location.substring(curr_location.lastIndexOf("/"));
      if (curr_location == "/home") {
      } else {
        window.location.href = "/dashboard/home/";
      }
    });

  document
    .getElementsByClassName("side_api")[0]
    .addEventListener("click", () => {
      let curr_location = window.location.href;
      curr_location = curr_location.substring(
        0,
        curr_location.lastIndexOf("/")
      );
      curr_location = curr_location.substring(curr_location.lastIndexOf("/"));
      if (curr_location == "/api") {
      } else {
        window.location.href = "/dashboard/api/";
      }
    });

  document
    .getElementsByClassName("side_db")[0]
    .addEventListener("click", () => {
      let curr_location = window.location.href;
      curr_location = curr_location.substring(
        0,
        curr_location.lastIndexOf("/")
      );
      curr_location = curr_location.substring(curr_location.lastIndexOf("/"));
      if (curr_location == "/database") {
      } else {
        window.location.href = "/dashboard/database/";
      }
    });

  document
    .getElementsByClassName("side_discordbot")[0]
    .addEventListener("click", () => {
      let curr_location = window.location.href;
      curr_location = curr_location.substring(
        0,
        curr_location.lastIndexOf("/")
      );
      curr_location = curr_location.substring(curr_location.lastIndexOf("/"));
      if (curr_location == "/bot") {
      } else {
        window.location.href = "/dashboard/bot/";
      }
    });

  document
    .getElementsByClassName("side_analytics")[0]
    .addEventListener("click", () => {
      let curr_location = window.location.href;
      curr_location = curr_location.substring(
        0,
        curr_location.lastIndexOf("/")
      );
      curr_location = curr_location.substring(curr_location.lastIndexOf("/"));
      if (curr_location == "/analytics") {
      } else {
        window.location.href = "/dashboard/analytics/";
      }
    });

  //===========================================================================================

  document
    .getElementsByClassName("side_settings")[0]
    .addEventListener("click", () => {
      alert("in development");
    });

  document
    .getElementsByClassName("side_billing")[0]
    .addEventListener("click", () => {
      alert("in development");
    });
</script>

<script src="{% static 'js/toggleTabs.js' %}"></script>
